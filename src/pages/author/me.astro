---
import { verifyToken } from '../../lib/auth'
import { getAuthor } from '../../lib/authors'

let user = null

const token = localStorage.getItem('token')

if (token) {
    try {
        user = verifyToken(token)
    } catch (err) {
        window.location.href = '/login'
    }
} else {
    window.location.href = '/login'
}

const author = getAuthor(user.username)
window.location.href = `/author/${user.username}`
---
